{% extends "account/base.html" %}
{% load i18n %}

{% block title %}Set New Password - Pro Sumo Manager{% endblock %}

{% block auth_title %}Set New Password{% endblock %}

{% block auth_content %}
{% if token_fail %}
<div class="alert alert-error mb-4">
    <span>This password reset link is invalid or has expired.</span>
</div>
<div class="text-center">
    <a href="{% url 'account_reset_password' %}" class="btn btn-primary">
        Request New Reset Link
    </a>
</div>
{% else %}
<form method="post" class="space-y-4">
    {% csrf_token %}

    {% if form.non_field_errors %}
    <div class="alert alert-error">
        {% for error in form.non_field_errors %}
        <span>{{ error }}</span>
        {% endfor %}
    </div>
    {% endif %}

    <div class="form-control">
        <label class="label" for="id_password1">
            <span class="label-text">New Password</span>
        </label>
        <input type="password"
               name="password1"
               id="id_password1"
               placeholder="Choose a strong password"
               class="input input-bordered w-full {% if form.password1.errors %}input-error{% endif %}"
               required>
        {% if form.password1.errors %}
        <label class="label">
            <span class="label-text-alt text-error">{{ form.password1.errors.0 }}</span>
        </label>
        {% endif %}
    </div>

    <div class="form-control">
        <label class="label" for="id_password2">
            <span class="label-text">Confirm New Password</span>
        </label>
        <input type="password"
               name="password2"
               id="id_password2"
               placeholder="Repeat your password"
               class="input input-bordered w-full {% if form.password2.errors %}input-error{% endif %}"
               required>
        {% if form.password2.errors %}
        <label class="label">
            <span class="label-text-alt text-error">{{ form.password2.errors.0 }}</span>
        </label>
        {% endif %}
    </div>

    <div class="form-control mt-6">
        <button type="submit" class="btn btn-primary w-full">Set New Password</button>
    </div>
</form>
{% endif %}
{% endblock %}
